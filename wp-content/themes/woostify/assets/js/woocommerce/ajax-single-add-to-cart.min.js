"use strict";var woostifyFormData=function(e){for(var t=[],a=0,n=e.elements.length;a<n;a++){var o=e.elements[a];o.name&&!o.disabled&&"reset"!==o.type&&(t[t.length]={name:o.name,value:o.value})}return t};function woostifyAjaxSingleAddToCartButton(){var e=document.querySelectorAll(".single_add_to_cart_button");e.length&&e.forEach((function(e){var t=e.closest("form.cart"),a=t.classList.contains("variations_form"),n=t.querySelector('[name="add-to-cart"]'),o=!!n&&n.value,r=t.querySelector(".qty"),i=t.querySelector(".additional-product"),c=!1,l={};if(a)var s=t.querySelector('[name="product_id"]'),u=t.querySelector('[name="variation_id"]'),d=t.querySelectorAll('select[name^="attribute"]');!o||t.classList.contains("grouped_form")||t.classList.contains("mnm_form")||t.classList.contains("bundle_form")||(e.onclick=function(n){n.preventDefault();var _={};if(t.querySelector('[name="wcgwp_action"]')){var f=t.querySelector('[name="wcgwp_single_product"]:checked'),v=t.querySelector('[name="wcgwp_single_product_note"]');f&&(_.gift_product_id=f.value),v&&(_.gift_product_note=v.value.trim())}var m=r?parseInt(r.value):0;a&&(o=s.value,c=u.value,d.forEach((function(e){var t=e.name,a=e.value;l[t]=a})));var y=document.querySelector(".cart-sidebar-content"),g=document.querySelectorAll(".shop-cart-count");if(r.classList.contains("ajax-ready")){e.classList.add("loading"),i&&(i.value=+i.value+ +r.value),"function"==typeof eventCartSidebarOpen&&eventCartSidebarOpen(),"function"==typeof cartSidebarOpen&&cartSidebarOpen(),"function"==typeof closeAll&&closeAll();var p={action:"single_add_to_cart",ajax_nonce:woostify_ajax_single_add_to_cart_data.ajax_nonce,product_id:o,product_qty:m,variation_id:c,variations:JSON.stringify(l),gift_wrap_data:JSON.stringify(_)};p=new URLSearchParams(p).toString();var S=new Request(woostify_ajax_single_add_to_cart_data.ajax_url,{method:"POST",body:p,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});fetch(S).then((function(e){if(200!==e.status)throw alert(woostify_ajax_single_add_to_cart_data.ajax_error),console.log("Status Code: "+e.status),e;return e.json()})).then((function(t){if(t.success){var a=t.data;if(g.length)for(var n=0,o=g.length;n<o;n++)g[n].innerHTML=a.item;if(y&&(y.innerHTML=a.content),e.classList.contains("woostify-buy-now")){var r=e.getAttribute("data-checkout_url");window.location=r}var i=document.querySelector(".woostify-total-price");i&&(i.innerHTML=a.total)}})).catch((function(e){console.log(e)})).finally((function(){"function"==typeof eventCartSidebarClose&&eventCartSidebarClose(),e.classList.remove("loading"),document.documentElement.classList.remove("quick-view-open"),jQuery(document.body).trigger("added_to_cart")}))}})}))}document.addEventListener("DOMContentLoaded",(function(){woostifyAjaxSingleAddToCartButton()}));